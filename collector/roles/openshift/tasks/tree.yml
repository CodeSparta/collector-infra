---
- name: '{{ plugin.name }} | role:{{ plugin.role }} | file:absent | Clean artifact staging space'
  file:
    path: '{{ item }}'
    state: absent
  loop:
    - '{{ dir.mirror }}/docker'
  when: not koffer.omnibus

- name: '{{ plugin.name }} | role:{{ plugin.role }} | file:directory | Create Artifact Directory Tree' 
  file:
    state: directory
    path: '{{ item }}'
    recurse: no
    mode: '0666'
  with_items:
    - '{{ dir.tmp }}'
    - '{{ dir.iac }}'
    - '{{ dir.bin }}'
    - '{{ dir.meta }}'
    - '{{ dir.nginx }}'
    - '{{ dir.koffer }}'
    - '{{ dir.bundle }}'
    - '{{ dir.mirror }}'
    - '{{ dir.secrets }}'
    - '{{ dir.registry }}'
    - '{{ dir.platform }}'
